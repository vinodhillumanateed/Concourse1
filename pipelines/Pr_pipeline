---
resource_types:

- name: pull-request
  type: docker-image
  source:
    repository: teliaoss/github-pr-resource
    tag: latest

resources:
- name: sc-suite-staff
  type: pull-request
  check_every: 1m
  source:
    repository: illuminateeducation/sc-suite-staff
    access_token: ((github-access-token))



jobs:
- name: compile-run-unittest
  plan:
  - get: sc-suite-staff
    trigger: true
    version: every
  - put: sc-suite-staff
    params:
      path: sc-suite-staff
      status: pending
  - task: build
    config:
      platform: linux
      image_resource:
        type: docker-image
        source:
          repository: Ant
          tag: 3.6.3-jdk-17
      inputs:
      - name: sc-suite-staff
      outputs:
      - name: build_out
      params:
        branch: master
      run:
       path: bash
       args:
       - -exec
       - |
          cd sc-suite-staff/tree/master/java/com/schoolcity/stars/utility
          "utility/*/*.java"
  on_success:
    do:
    - put: sc-suite-staff
      params:
        path: sc-suite-staff
        status: success
  on_failure:
    do:
    - put: sc-suite-staff
      params:
        path: sc-suite-staff
        status: failure
